@using hastanerandevu.Models.Entities
@model List<string>
    @{
    ViewBag.Title = "Doktor";
    Layout = "~/Views/Shared/Layout.cshtml";
}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
    .tab {
        overflow: hidden;
        background-color: white;
    }
   
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 21px;
            transition: 0.3s;
            font-size: 17px;
        }
            .tab button:hover {
                background-color: #ddd;
            }
            .tab button.active {
                background-color: #ccc;
            }

    .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }

    .box {
        overflow: hidden;
        margin: 0 auto;
        transition: all 0.4s ease-in-out;
    }

    .hide {
        height: 0;
    }
</style>
<body>
    <a href="/Home/Index" class="fa-solid fa-chevron-left" style="margin-top: 50px;text-decoration:none; color:black;"></a><a href="/Home/Index" style="text-decoration:none; font-size:24px;font-weight:500; font-family:'Poppins'; margin-top:50px; color:black;"> Doktor Randevusu Al</a>

    <div id="gunler" class="tab" style="margin-top: 50px">
        <button id="@DateTime.Now.AddDays(1).ToString("dd MMMM dddd")" class="tablinks @DateTime.Now.AddDays(1).ToString("dd MMMM dddd")" onclick="openCity(event, 'Butonlar(0)')">@DateTime.Now.AddDays(1).ToString("dd MMMM dddd")</button>
        <button id="@DateTime.Now.AddDays(2).ToString("dd MMMM dddd")" class="tablinks @DateTime.Now.AddDays(2).ToString("dd MMMM dddd")" onclick="openCity(event, 'Butonlar(1)')">@DateTime.Now.AddDays(2).ToString("dd MMMM dddd")</button>
        <button id="@DateTime.Now.AddDays(3).ToString("dd MMMM dddd")" class="tablinks @DateTime.Now.AddDays(3).ToString("dd MMMM dddd")" onclick="openCity(event, 'Butonlar(2)')">@DateTime.Now.AddDays(3).ToString("dd MMMM dddd")</button>
        <button id="@DateTime.Now.AddDays(4).ToString("dd MMMM dddd")" class="tablinks @DateTime.Now.AddDays(4).ToString("dd MMMM dddd")" onclick="openCity(event, 'Butonlar(3)')">@DateTime.Now.AddDays(4).ToString("dd MMMM dddd")</button>
        <button id="@DateTime.Now.AddDays(5).ToString("dd MMMM dddd")" class="tablinks @DateTime.Now.AddDays(5).ToString("dd MMMM dddd")" onclick="openCity(event, 'Butonlar(4)')">@DateTime.Now.AddDays(5).ToString("dd MMMM dddd")</button>
        <button id="@DateTime.Now.AddDays(6).ToString("dd MMMM dddd")" class="tablinks @DateTime.Now.AddDays(6).ToString("dd MMMM dddd")" onclick="openCity(event, 'Butonlar(5)')">@DateTime.Now.AddDays(6).ToString("dd MMMM dddd")</button>
        <button id="@DateTime.Now.AddDays(7).ToString("dd MMMM dddd")" class="tablinks @DateTime.Now.AddDays(7).ToString("dd MMMM dddd")" onclick="openCity(event, 'Butonlar(6)')">@DateTime.Now.AddDays(7).ToString("dd MMMM dddd")</button>
    </div>

    <div id="Allbuttons" class="Allbuttons">
        @for (int i = 0; i < 7; i++)
        {
            <div id="Butonlar(@i)" class="Butonlar(@i) tabcontent" style="border-style:solid; border-width:1px;border-radius:5px;margin-bottom:10px;width:auto;">
                <div>
                    <div style="margin-left: 10px; margin-top: 10px; font-size: 18px;float:left;">9:00</div>
                    <button style="float: right; margin-top: 10px; font-size: 18px;margin-right:10px;" onclick="slide(@i.ToString());"><i class="fa-sharp fa-solid fa-chevron-down"></i></button>
                </div>

                <div class="box mt-5" style="border-bottom: 1px solid; ">
                    <div id="box(@i.ToString())" class="mb-3" style="display: none;">
                        <button type="button" id="9:00" style="width: 100px; background-color:blue;" class="btn btn-primary btn-m mx-5 butons 9:00">9:00</button>
                        <button type="button" id="9:20" style="width: 100px; background-color:blue;" class="btn btn-primary btn-m mx-5 butons 9:20">9:20</button>
                        <button type="button" id="9:40" style="width: 100px; background-color:blue;" class="btn btn-primary btn-m mx-5 butons 9:40">9:40</button>
                    </div>
                </div>

                <div>
                    <div style="margin-left: 10px; margin-top: 10px; font-size: 18px; float: left; font-weight: 500;">10:00</div>
                    <button style="float: right; margin-top: 10px; font-size: 18px;margin-right:10px;" onclick="sd(@i.ToString());"><i class="fa-sharp fa-solid fa-chevron-down"></i></button>
                </div>

                <div class="box mt-5" style="border-bottom: 1px solid;">
                    <div id="aa(@i.ToString())" class="mb-3" style="display: none;">
                        <button type="button" id="10:00" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 10:00">10:00</button>
                        <button type="button" id="10:20" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 10:20">10:20</button>
                        <button type="button" id="10:40" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 10:40">10:40</button>
                    </div>
                </div>

                <div>
                    <div style="margin-left: 10px; margin-top: 10px; font-size: 18px; float: left;">11:00</div>
                    <button style="float: right; margin-top: 10px; font-size: 18px;margin-right:10px;" onclick="sa(@i.ToString());"><i class="fa-sharp fa-solid fa-chevron-down"></i></button>
                </div>

                <div class="box mt-5" style="border-bottom: 1px solid;">
                    <div id="bb(@i.ToString())" class="mb-3" style="display: none;">
                        <button type="button" id="11:00" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 11:00">11:00</button>
                        <button type="button" id="11:20" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 11:20">11:20</button>
                        <button type="button" id="11:40" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 11:40">11:40</button>
                    </div>
                </div>

                <div>
                    <div style="margin-left: 10px; margin-top: 10px; font-size: 18px;float:left;">12:00</div>
                    <button style="float: right; margin-top: 10px; font-size: 18px;margin-right:10px;" onclick="my(@i.ToString());"><i class="fa-sharp fa-solid fa-chevron-down"></i></button>
                </div>

                <div class="box mt-5" style="border-bottom:1px solid;">
                    <div id="cc(@i.ToString())" class="mb-3" style="display: none;">
                        <button type="button" id="12:00" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 12:00">12:00</button>
                        <button type="button" id="12:20" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 12:20">12:20</button>
                        <button type="button" id="12:40" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 12:40">12:40</button>
                    </div>
                </div>

                <div>
                    <div style="margin-left: 10px; margin-top: 10px; font-size: 18px;float:left;">13:00</div>
                    <button style="float: right; margin-top: 10px; font-size: 18px;margin-right:10px;" onclick="ma(@i.ToString());"><i class="fa-sharp fa-solid fa-chevron-down"></i></button>
                </div>

                <div class="box mt-5" style="border-bottom:1px solid;">
                    <div id="dd(@i.ToString())" class="mb-3" style="display: none;">
                        <button type="button" id="13:00" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 13:00">13:00</button>
                        <button type="button" id="13:20" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 13:20">13:20</button>
                        <button type="button" id="13:40" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 13:40">13:40</button>
                    </div>
                </div>

                <div>
                    <div style="margin-left: 10px; margin-top: 10px; font-size: 18px;float:left;">14:00</div>
                    <button style="float: right; margin-top: 10px; font-size: 18px;margin-right:10px;" onclick="md(@i.ToString());"><i class="fa-sharp fa-solid fa-chevron-down"></i></button>
                </div>

                <div class="box mt-5" style="border-bottom:1px solid;">
                    <div id="ee(@i.ToString())" class="mb-3" style="display: none;">
                        <button type="button" id="14:00" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 14:00">14:00</button>
                        <button type="button" id="14:20" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 14:20">14:20</button>
                        <button type="button" id="14:40" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 14:40">14:40</button>
                    </div>
                </div>

                <div>
                    <div style="margin-left: 10px; margin-top: 10px; font-size: 18px;float:left;">15:00</div>
                    <button style="float: right; margin-top: 10px; font-size: 18px;margin-right:10px;" onclick="ms(@i.ToString());"><i class="fa-sharp fa-solid fa-chevron-down"></i></button>
                </div>

                <div class="box mt-5" style="border-bottom:1px solid;">
                    <div id="ff(@i.ToString())" class="mb-3" style="display: none;">
                        <button type="button" id="15:00" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 15:00">15:00</button>
                        <button type="button" id="15:20" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 15:20">15:20</button>
                        <button type="button" id="15:40" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 15:40">15:40</button>
                    </div>
                </div>

                <div>
                    <div style="margin-left: 10px; margin-top: 10px; font-size: 18px;float:left;">16:00</div>
                    <button style="float: right; margin-top: 10px; font-size: 18px;margin-right:10px;" onclick="mf(@i.ToString());"><i class="fa-sharp fa-solid fa-chevron-down"></i></button>
                </div>

                <div class="box mt-5" style="border-bottom:1px solid;">
                    <div id="gg(@i.ToString())" class="mb-3" style="display: none;">
                        <button type="button" id="16:00" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 16:00">16:00</button>
                        <button type="button" id="16:20" style="width: 100px; background-color: blue;" class="btn btn-primary btn-m mx-5 butons 16:20">16:20</button>
                        <button type="button" id="16:40" style="width:100px; background-color:blue;" class="btn btn-primary btn-m mx-5 butons 16:40">16:40</button>
                    </div>
                </div>

            </div>
        }
    </div>
    <div style="display:flex;align-items:center;justify-content:center;">
        <a id="buyButton" class="buyButton btn btn-danger w-25 mt-3 mb-3" style="text-align:center;"> Randevu Al</a>
    </div>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>

    $("#buyButton").click(function (event) {
        var url = window.location.pathname;
        var sid = url.substring(url.lastIndexOf('/') + 1);
        var ticket = {
            "DOKTORID": sid,
            "RANDEVUTUR":3,
            "RANDEVUTARIH": selected,
            "RANDEVUSAAT": selectedhour,

        }
        event.preventDefault();

        $.ajax({
            type: "POST",
            dataType: "json",
            url: "/Home/DoktorRandevuAl",
            data: {
                data: JSON.stringify(
                    ticket)
            },
            success: function (response) {
                window.location.href = "/Home/Index";
            }
        });

    });


    function openCity(evt, cityName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
    }
    function slide(i) {
        console.log(i);
        var x = document.getElementById("box(" + i + ")");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }

    function sd(i) {
        var x = document.getElementById("aa(" + i + ")");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
    function sa(i) {
        var x = document.getElementById("bb(" + i + ")");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
    function my(i) {
        var x = document.getElementById("cc(" + i + ")");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
    function ma(i) {
        var x = document.getElementById("dd(" + i + ")");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
    function md(i) {
        var x = document.getElementById("ee(" + i + ")");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
    function ms(i) {
        var x = document.getElementById("ff(" + i + ")");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
    function mf(i) {
        var x = document.getElementById("gg(" + i + ")");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }
    let selected = "";
    document.getElementById('gunler').addEventListener('click', function (event) {

        const collection = document.getElementsByClassName('tablinks');

        for (let i = 0; i < collection.length; i++) {

            if (event.target.classList[1] == collection[i].classList[1]) {
                selected = event.target.classList[1] + " " + event.target.classList[2] + " " + event.target.classList[3];
            }
            else {

            }

        }
        console.log(selected);
    });
    let selectedhour = "";
    document.getElementById('Allbuttons').addEventListener('click', function (event) {

        const collection = document.getElementsByClassName('butons');
        for (let i = 0; i < collection.length; i++) {
            if (event.target.classList[0] != "fa-sharp") {
                collection[i].style.backgroundColor = "blue";
            }
        }
        console.log(event.target.classList[0]);
        for (let i = 0; i < collection.length; i++) {

            if (event.target.classList[5] == collection[i].classList[5]) {

                if (collection[i].style.backgroundColor != "rgb(0, 171, 182)") {
                    if (collection[i].style.backgroundColor == "blue") {
                        collection[i].style.backgroundColor = "green";
                        selectedhour = collection[i].classList[5];
                        console.log(selectedhour);
                    }
                    else {

                        collection[i].style.backgroundColor = "blue";
                    }
                }



            } else {


            }
        }

    });

</script>

